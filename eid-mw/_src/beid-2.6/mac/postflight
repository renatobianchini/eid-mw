

########## For the 2.6 middleware ##########

echo 1 > /tmp/beid_install.log

ln -f -s /usr/local/lib/libbeidcommon.1.0.0.dylib /usr/local/lib/libbeidcommon.1.0.dylib
ln -f -s /usr/local/lib/libbeidcommon.1.0.0.dylib /usr/local/lib/libbeidcommon.1.dylib
echo 2 > /tmp/beid_install.log

ln -f -s /usr/local/lib/libbeid.2.7.4.dylib /usr/local/lib/libbeid.2.7.dylib
ln -f -s /usr/local/lib/libbeid.2.7.dylib /usr/local/lib/libbeid.2.dylib
ln -f -s /usr/local/lib/libbeid.2.dylib /usr/local/lib/libbeid.dylib
echo 3 > /tmp/beid_install.log

ln -f -s /usr/local/lib/libbeidgui.1.5.0.dylib /usr/local/lib/libbeidgui.1.5.dylib
ln -f -s /usr/local/lib/libbeidgui.1.5.0.dylib /usr/local/lib/libbeidgui.1.dylib
ln -f -s /usr/local/lib/libbeidgui.1.5.0.dylib /usr/local/lib/libbeidgui.dylib
echo 4 > /tmp/beid_install.log

ln -f -s /usr/local/lib/libbeidlibopensc.2.2.0.dylib /usr/local/lib/libbeidlibopensc.2.2.dylib
ln -f -s /usr/local/lib/libbeidlibopensc.2.2.dylib /usr/local/lib/libbeidlibopensc.2.dylib
ln -f -s /usr/local/lib/libbeidlibopensc.2.dylib /usr/local/lib/libbeidlibopensc.dylib
echo 5 > /tmp/beid_install.log

ln -f -s /usr/local/lib/libbeidlibopenscinternal.2.2.0.dylib /usr/local/lib/libbeidlibopenscinternal.2.2.dylib
ln -f -s /usr/local/lib/libbeidlibopenscinternal.2.2.dylib /usr/local/lib/libbeidlibopenscinternal.2.dylib
ln -f -s /usr/local/lib/libbeidlibopenscinternal.2.dylib /usr/local/lib/libbeidlibopenscinternal.dylib
echo 6 > /tmp/beid_install.log

ln -f -s /usr/local/lib/libqt-mt.3.3.8.dylib /usr/local/lib/libqt-mt.3.3.dylib
ln -f -s /usr/local/lib/libqt-mt.3.3.dylib /usr/local/lib/libqt-mt.3.dylib
ln -f -s /usr/local/lib/libqt-mt.3.dylib /usr/local/lib/libqt-mt.dylib
echo 7 > /tmp/beid_install.log

ln -f -s /usr/local/lib/libbeidlibjni.2.7.2.dylib /Library/Java/Extensions/libbeidlibjni.jnilib
echo 10 > /tmp/beid_install.log

test -d /usr/local/share/beid/crl && rm -rf /usr/local/share/beid/crl
echo 11 > /tmp/beid_install.log

test /usr/local/bin/beidcrld && rm -rf /usr/local/bin/beidcrld
echo 12 > /tmp/beid_install.log

########## Remove the even older middleware, if present ##########

test -d /Applications/Belgium-EID-pkcs11/ && rm -rf /Applications/Belgium-EID-pkcs11/
echo 21 > /tmp/beid_install.log
test /usr/local/lib/libbelpic.0.0.9.dylib && rm -f /usr/local/lib/libbelpic.0.0.9.dylib
echo 22 > /tmp/beid_install.log
test /usr/local/lib/libbelpic.0.dylib && rm -f /usr/local/lib/libbelpic.0.dylib
echo 23 > /tmp/beid_install.log
test /usr/local/bin/belpic-tool && rm -f /usr/local/bin/belpic-tool
echo 24 > /tmp/beid_install.log
test /usr/local/bin/belpic-pkcs11-tool && rm -f /usr/local/bin/belpic-pkcs11-tool
echo 25 > /tmp/beid_install.log
test -d /usr/local/bin/belpic-pkcs11-tool.app/ && rm -rf /usr/local/bin/belpic-pkcs11-tool.app/
echo 26 > /tmp/beid_install.log
test /usr/local/etc/belpic.conf && rm -f /usr/local/etc/belpic.conf
echo 27 > /tmp/beid_install.log
test /usr/share/man/man1/belpic-tool.1 && rm -f /usr/share/man/man1/belpic-tool.1
echo 28 > /tmp/beid_install.log
test /usr/share/man/man1/belpic-pkcs11-tool.1 && rm -f /usr/share/man/man1/belpic-pkcs11-tool.1
echo 29 > /tmp/beid_install.log
test -d /Library/Receipts/BE-eID-MacOSX-pkcs11-v1.5.1.pkg/ && rm -rf /Library/Receipts/BE-eID-MacOSX-pkcs11-v1.5.1.pkg/
echo 30 > /tmp/beid_install.log
test /usr/local/lib/libbeidlibjni.jnilib && rm -f /usr/local/lib/libbeidlibjni.jnilib
echo 31 > /tmp/beid_install.log

echo succeeded > /tmp/beid_install.log

rm /tmp/beid_install.log
